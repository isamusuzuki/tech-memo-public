# 編集コマンド

作成日 2020/02/03

## 01. vi コマンド

### カーソル移動

- `j` ... 下へ、
- `k` ... 上へ
- `^` ... 行頭へ、
- `$` ... 行末へ
- `H` ... 画面先頭へ、
- `M` ... 画面真ん中へ、
- `L` ... 画面最終行へ
- ctrl + f ... 次画面へ、
- ctrl + b ... 前画面へ
- `G` ... 最終行へ、
- `{n}G` ... {n}行目へ

### テキスト入力

- `i` ... カーソルの左に文字を挿入
- `a` ... カーソルの右に文字を挿入
- `o` ... カーソル行の下に空行をつくって文字を挿入

### 削除

- `x` ... 一文字削除
- `dd` ... 一行削除

### コピペ

- `yy` ... 現在の行をコピーする
- `{n}p` ... {n}行下に貼り付ける

### 複数行の移動

- `ms` ... 現在の行からマークを開始
- `me` ... 現在の行まででマークを終了
- `:'s,'ed` ... マークした複数行をカットする
- `p` ... マークした複数行を貼り付ける

### 取り消し

- `u` ... 直前の操作を取り消す

### 検索

- `/{aaa}` ... 文字列を検索する
- `n` ... 次を検索する

## 02. sed コマンド

ファイルの中のある箇所を置換する

構文: `cat 読み込むファイル名 | sed -e "s/置換ルール/置換文字/" > 吐き出すファイル名`

オプション

- `-e` ... 次にくる処理命令を実行する
- `-i` ... 処理内容を同じファイルに書き込む
- `s` ... 正規表現で置換処理する
- `g` ... すべてのマッチした文字列を置換する

使用例

```bash
sed -i -e 's/jkl/JKL/g' ./test.txt
sed -i -e 's@/etc/foo/bar@/home/my/etc@g' ./test.txt
```

スラッシュをエスケープするのが面倒なときは、違う記号を使えばいい \
`\n`で改行も追加できる

使用例

```bash
cat /etc/sysconfig/network | sed -e "s|^NETWORKING.*|NETWORKING=yes|" -e "s|^HOSTNAME.*|HOSTNAME=lamp.vagrantup.com|" > /tmp/network
sudo cp -p /etc/sysconfig/network /etc/sysconfig/network.old
sudo cp -p /tmp/network /etc/sysconfig/network
rm -f /tmp/network

cat /etc/sysconfig/selinux | sed 's/^SELINUX=.*$/SELINUX=disabled/' > /tmp/selinux
sudo cp -p /etc/sysconfig/selinux /etc/sysconfig/selinux.old
sudo cp -p /tmp/selinux /etc/sysconfig/selinux
rm -f /tmp/selinux

sed -i -e 's@DocumentRoot /var/www/html@#DocumentRoot /var/www/html\n<Document /var/www/html>@g' ./test.txt
```
