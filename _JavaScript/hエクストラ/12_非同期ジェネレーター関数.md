# 非同期ジェネレーター関数

作成日 2025/07/29

## 1. `async function*`宣言

参照記事 => [async function* - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/async_function*)

> `async function*`宣言は非同期ジェネレーター関数を定義し、これは`AsyncGenerator`オブジェクトを返します。

```javascript
async function* foo() {
  yield await Promise.resolve("a");
  yield await Promise.resolve("b");
  yield await Promise.resolve("c");
}

let str = "";

async function generate() {
  for await (const val of foo()) {
    str = str + val;
  }
  console.log(str);
}

generate(); // abc
```

非同期ジェネレーター関数には、対応するアロー関数はない。アロー関数では非同期ジェネレーター関数を表現できない

- 非同期ジェネレーター関数は、非同期関数とジェネレーター関数の機能を組み合わせたもの
- 関数の内部で`await`と`yield`のキーワードの両方を使うことができる
- これにより、ジェネレーター関数の遅延の性質を利用しながら、`await`で人間工学的に非同期タスクを処理することができるようになる
- `function*`で宣言された通常のジェネレーター関数とは異なり、非同期ジェネレーター関数は`AsyncGenerator`オブジェクトを返す
- `next()`を呼び出すたびに、イテレーターの結果オブジェクトに解決する`Promise`を返す
