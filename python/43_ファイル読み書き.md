# Python ファイル読み書き

作成日 2019/11/01

## 01. テキストファイルを書く

```python
s = 'Hello, World!'
with open('temp/test.txt', mode='w', encoding='utf-8') as f:
    f.write(s)
```

## 02. テキストファイルを読む

```python
with open('temp/test.txt', mode='r', encoding='utf-8') as f:
    body = f.read()
body_dict = josn.loads(body)
folder_names = body_dict['folderNames']
```

## 03. JSON データを取り扱う

-   `json.loads(s)` ... JSON 文字列を辞書データに変換する
-   `json.load(fp)` ... `read()`メソッドを持つオブジェクトからデータを読んで辞書データに変換する
-   `json.dumps(obj)` ... 辞書データを JSON 文字列に変換する
-   `json.dump(obj, fp)` ... 辞書データをオブジェクトへのストリームとしてシリアライズする

```python
import json

print(json.dumps({'名前': '鈴木'}))
#=> {"\u540d\u524d": "\u9234\u6728"}

print(json.dumps({'名前': '鈴木'}, ensure_ascii=False))
#=> {"名前": "鈴木"}

print(json.dumps({'6': 7, '4': 5}, sort_keys=True, indent=4))
#=> {
#=>    "4": 5,
#=>    "6": 7
#=> }
```

## 04. YAML ファイルを書く

```python
import yaml

data = {
    'item_code': 'atc1222',
    'style': 'ladies',
    'color_start_number': 8,
    'gousei_pattern': 'foursome',
    'colors': [
        {'filename': 'c1.jpg', 'colorname': 'BK.ブラック'},
        {'filename': 'c2.jpg', 'colorname': 'BL.ブルー'},
        {'filename': 'c3.jpg', 'colorname': 'GR.グリーン'},
        {'filename': 'c4.jpg', 'colorname': 'GY.グレー'},
        {'filename': 'c5.jpg', 'colorname': 'NV.ネイビー'}
    ]
}

with open('temp/test.yml', mode='w', encoding='utf-8') as f:
    yaml.dump(data, f, encoding='utf-8', allow_unicode=True)
```

test.yml

```yaml
color_start_number: 8
colors:
    - colorname: BK.ブラック
      filename: c1.jpg
    - colorname: BL.ブルー
      filename: c2.jpg
    - colorname: GR.グリーン
      filename: c3.jpg
    - colorname: GY.グレー
      filename: c4.jpg
    - colorname: NV.ネイビー
      filename: c5.jpg
gousei_pattern: foursome
item_code: atc1222
style: ladies
```

## 05. 指定したフォルダの中にあるファイルを調べる

```python
import os

result = os.listdir('./temp')

print(result)
# => ['aaa.txt', 'bbb.txt']

print(len(result))
# => 2

with open(f'./temp/{result[1]}', mode='r', encoding='utf-8') as f:
    body = f.read()

print(body)
# => bbb
```
