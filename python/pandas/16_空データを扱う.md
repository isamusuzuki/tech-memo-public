# 空データを扱う

作成日 2020/08/11、更新日 2020/08/20

## 01. 空列を追加する

空データは、少なくとも 3 種類ある

- Python の`None`
- 空文字列の `''`
- Numpy の`NaN`

どれでも、CSV ファイルの中では空になっている

```python
import numpy as np

import pandas as pd


def apple():
    # データ1の読み込み
    data1 = {
        'a': [1, 2, 3],
        'b': [3, 6, 9]
    }
    df1 = pd.DataFrame(data1)
    print(df1.head())
    print(df1.shape)
    print(df1.columns)
    print('----------')

    # 列を水増しする
    df1['属性1'] = None
    df1['属性2'] = ''
    df1['属性3'] = np.nan
    print(df1.head())
    print(df1.shape)
    print(df1.columns)
    print('----------')

    # データの保存
    df1.to_csv('temp/apple.csv', index=False)
    print('done')


if __name__ == "__main__":
    apple()
```

## 02. 空データを判断する

以下のようなサンプルコードで、変数 `category1` には文字列か、もしくは `NaN` が入っているとする。このとき `if category1:` と単純に書くことはできない

`NaN` は、真偽値に変換されると `True` になる。また `type(NaN)` は、floatが返ってくる

```python
import pandas as pd

df = pd.read_csv(filename, encoding='utf-8')
# 行数を知る
row_count = df.shape[0]
# カテゴリー1の列番号を知る
category1_number = df.columns.get_loc('カテゴリー名1')

# 行数だけ繰り返す
for i in range(0, row_count):
    # その行のカテゴリー1を知る
    category1 = df.iat[i, category1_number]
    if isinstance(category1, str):
        # カテゴリー名1が空でないときの処理
    else:
        # カテゴリー名1がNaNのときの処理
```
