# 外部コマンドを実行する

作成日 2020/03/26

## subprocess.call()

`call()`メソッドを使うと、終了待ちをする。\
Python のプロセスは、ブロックされる

```python
import subprocess

cmd = 'sleep 30'
proc = subprocess.call(cmd, shell=True)
```

## subprocess.Popen()

`Popen()`メソッドを使うと、終了待ちをせずに、\
サブプロセスを起動したら、Python のプロセスは、先に進む。\
親プロセスの Python が、サブプロセスよりも先に終了してしまったら、\
孤児プロセスとして、root プロセスに引き取られる

```python
proc = subprocess.Popen(cmd, shell=True)
```

### Popen()メソッドでも、終了待ちさせることは可能

```python
proc = subprocess.Popen(cmd,shell=True)
proc.wait()
```

### Popen()メソッドなら、できること

コンソールにプロセス ID を表示する

```python
proc = subprocess.Popen(cmd, shell=True)
print(f'process {proc.pid} starts')
proc.wait()
```

## subprocess.getoutput()

サブプロセスの戻り値を取得できる

```python
from subprocess import getoutput

for color in spec['colors']:
    cmd = f'identify -format "%w,%h" temp/{color["filename"]}'
    size = getoutput(cmd).split(',')
    width = int(size[0])
    height = int(size[1])
```
