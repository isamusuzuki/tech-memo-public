# ログ出力

作成日 2024/12/24、更新日 2025/12/10

- Spring Bootには、logback とSLF4Jが最初から組み込まれている
- ログ出力の設定は、logbackに対して行う

## いちから自分で設定してみる

`src/main/resources`フォルダに`logback-spring.xml`を作成する

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE logback>
<configuration>
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%date %level [%thread] %logger %msg%n</pattern>
    </encoder>
  </appender>

  <root level="INFO">
    <appender-ref ref="STDOUT" />
  </root>
</configuration>
```

- これは、「INFOレベルのログを、コンソールに、自分が設定したパターンで、出力させる」という設定
- `logback-spring.xml`を作成すると、Spring Bootのデフォルト設定を上書きしてしまうので、要注意

## Sping Bootのデフォルト設定を継承しつつ、自分の設定を追加する

`src/main/resorce`フォルダに`logback-spring.xml`を作成する

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE logback>
<configuration>
  <!-- Spring Bootのデフォルト設定を読み込む -->
  <include resource="org/springframework/boot/logging/logback/defaults.xml" />
  <include resource="org/springframework/boot/logging/logback/console-appender.xml" />

  <!-- INFOレベルのログをコンソールに出力させる-->
  <root level="INFO">
    <appender-ref ref="CONSOLE"/>
  </root>

  <!-- 自分なりの設定を追加する -->
  <logger name="org.dbflute.system.QLog" level="DEBUG">
    <appender-ref ref="CONSOLE"/>
  </logger>
</configuration>
```

- `console-appender.xml`では`CONSOLE`という名前のアペンダーが定義されてる
