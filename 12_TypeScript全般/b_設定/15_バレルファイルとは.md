# バレルファイルとは

作成日 2025/10/22

## 解説記事を読む

[indexファイル(バレルファイル)不使用のすゝめ](https://zenn.dev/miyabitti256/articles/dont-use-barrel-file)

> バレルファイル（Barrel File）とは、複数のモジュールをまとめて再エクスポートするファイルのことです。主にindex.tsやindex.jsという名前で作成され、ディレクトリ内の複数のファイルからエクスポートされた関数、クラス、定数などを一箇所にまとめて外部に公開する役割を持ちます。

### 具体例

```text
--components/
    |--Button.tsx
    |--Input.tsx
    |--Modal.tsx
    `--index.ts  ... バレルファイル
```

components/index.ts

```javascript
export { Button } from './Button';
export { Input } from './Input';
export { Modal } from './Modal';
```

バレルファイルを使うと、外部からまとめてインポートできるようになる

```javascript
// バレルファイルを使わない場合
import { Button } from './components/Button';
import { Input } from './components/Input';
import { Modal } from './components/Modal';

// バレルファイルを使う場合
import { Button, Input, Modal } from './components';
```

バレルファイルはインポートをすっきりと見せる便利な機能だが、その裏には様々なトレードオフがある

### バレルファイルを使わない理由

1. 最も大きな問題は、Tree Shakingが効かなくなる可能性があること
2. バレルファイルは循環依存を引き起こしやすい
3. Viteでは、バレルファイルを使用すると、開発モードで多くのファイルが一気にダウンロード・コンパイルされ、HMRが非常に遅くなる
4. 名前空間インポートを使用した場合、クラスのメソッドのように見える可能性がある
5. TypeScriptコンパイラは、バレルファイルを通すことで余計な型解決を行う必要がある
6. バレルファイルを使用すると、IDEの「定義に移動（Go to Definition）」機能でバレルファイルに飛んでしまい、実際の実装にたどり着くまでに余計なステップが必要になる
7. ファイルの移動や名前変更時に、バレルファイルも合わせて更新する必要があり、リファクタリングが複雑になる
8. ESModulesの部分的インポートの恩恵を受けられない
9. Monorepo環境では、パッケージ間の依存関係が複雑になりがち

### バレルファイルの使いどころ

ライブラリの作者が公開APIを定義する場面
