# WEBアプリを開発する

作成日 2026/01/19

## 1. 第3回のコードを改造する

- `src/index.ts`ファイルを`api.ts`ファイルに改名する
- app変数をapi変数に変更する
- `.basePath("/api")`を取り除く

```javascript
import { Hono } from "hono";

export interface Env {
    todoapi: D1Database;
}

const api = new Hono<{ Bindings: Env }>();

// 省略

export default api;
```

`src/index.ts`ファイルを改めて作成する

```javascript
import { Hono } from "hono";
import api from "./api";

const app = new Hono();

app.route("/api", api);

export default app;
```

開発サーバーを起動して、今までのURLが変化なく動作していることを確認する

## 2. JSXを使えるように設定を追加する

tsconfig.json

```json
{
    "compilerOptions": {
        "jsx": "react-jsx",            // 変更なし
        "jsxImportSource": "hono/jsx", // 追加する
    },
    "include": [
        "src/**/*.ts", // 変更なし
        "src/**/*.tsx" // 追加する
    ]
}
```

## 3. ファイルを追加・修正する

src/renderer.tsx

```javascript
import { jsxRenderer } from "hono/jsx-renderer";

export const renderer = jsxRenderer(
    ({ children }) => {
        return (
            <html lang="ja">
                <head>
                    <meta charset="UTF-8" />
                    <meta
                        name="viewport"
                        content="width=device-width, initial-scale=1.0"
                    />
                    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
                        integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz" 
                        crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
                    <title>Simple Todo</title>
                </head>
                <body>
                    <div class="p-4">
                        <h1 class="text-4xl font-bold mb-4">
                            <a href="/">Simple Todo</a>
                        </h1>
                        {children}
                    </div>
                </body>
            </html>
        );
    },
    { docType: "<!DOCTYPE html>" },
);
```

src/page.tsx

```javascript
import { Hono } from "hono";
import { renderer } from "./renderer";

export interface Env {
    todoapi: D1Database;
}

const page = new Hono<{ Bindings: Env }>();

page.get("*", renderer);

page.get("/", async (c) => {
    return c.render(
        <div>
            <h1>Simple Todo API</h1>
            <p>Welcome to the Simple Todo API page.</p>
        </div>,
    );
});

export default page;
```

src/index.tsxを修正する

```javascript
import { Hono } from "hono";
import api from "./api";
import page from "./page"; // 追加する

const app = new Hono();

app.route("/api", api);
app.route("/todos", page);

app.get("/", (c) => {
    return c.redirect("/todos");
});

export default app;
```
