---
tags: python
---

# 日付時刻

作成日 2019/12/05

## 01. 作業の経過時間を記録する

```python
import time

print('作業を開始します。しばらくお待ちください')
t1 = time.time()

for i in range(1000000):
    i ** 10

t2 = time.time()
elapsed_time = t2 - t1
print (f'作業が終わりました。{elapsed_time:0.2f}秒かかりました')
```

## 02. 日本時間を取得してからファイル名に使う

```python
import datetime

import pytz

now = datetime.datetime.now(pytz.timezone('Asia/Tokyo'))
path = f'temp/{now.strftime("%Y%m%d-%H%M%S")}_test.txt'
print(path)
```

## 03. 現在の時刻から10分前を取得する

```python
import datetime

import pytz

utc_now = datetime.datetime.now(pytz.timezone('utc'))
utc_10m_before = utc_now - datetime.timedelta(minutes=10)
print(f'UTCで10分前 => {utc_10m_before.strftime("%Y-%m-%dT%H:%M:%SZ")}')
```

## 04. 曜日と週の情報を取得する

```python
import datetime

import pytz

now = datetime.datetime.now(pytz.timezone('Asia/Tokyo'))
print(now) #=> 2019-10-03 10:48:41.231136+09:00
print(nwo.weekday()) #=> 3
print(now.isoweekday()) #=> 4
print(now.isocalendar()) #=> (2019, 40, 4)

year_number, week_number, youbi_number = now.isocalendar()
print(year_number) #=> 2019
print(week_number) #=> 40
print(youbi_number) #=> 4
```

- `weekday()` ... 週番号（月曜日が 0 で、日曜日が 6）が返る
- `isoweekday()` ... 違う週番号（月曜日が 1 で、日曜日が 7）が返る
- `isocalendar()` ... 年、週番号、曜日番号のタプルが返る
