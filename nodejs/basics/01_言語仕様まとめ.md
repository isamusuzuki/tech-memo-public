# 言語仕様まとめ

作成日 2021/01/24

## 01. for ループ

```javascript
for (i = 0; i < cars.length; i++) {
  text += cars[i] + '<br>';
}
```

## 02. null 判定

```javascript
if (!hoge) {
  // この条件式が真になるのは、null, undefined, 0, 空文字, falseのとき
  // これだと数値のゼロは受けていいときに困る
}

if (hoge === null || hoge === undefined) {
  // この条件式が真になるのは、null, undefinedだけ
  // 存在チェックはこちらのほうが安全
}
```

## 03. 数値文字列変換

```javascript
// 数値を文字列に変換する
let num = 123;
num.toString(10); //=> '123'
num + ''; //=> '123'

// 文字列を数値に変換する
let str = '123';
parseInt(str, 10); //=> 123
parseFloat(str); //=> 123
str - 0; //=> 123
str * 1; //=> 123
str / 1; //=> 123
```

## 04. 文字列切り出し

```javascript
let str = '0123456789';

// 文字列.slice(開始位置 [,終了位置])
// 終了位置を省略すると、最後まで切り出す
str.slice(3); //=> '3456789'

// 文字列.substr(開始位置 [,切り出す長さ])
// 長さを省略すると、最後まで切り出す
str.substr(3); //=> '3456789'

// 文字列.substring(開始位置, 終了位置)
// 終了位置は省略できない
str.substring(3, 7); //=> '3456'
// 右端の一文字だけを落としたいとき
str.substring(0, str.length - 1); //=> '012345678'
```

## 05. Math オブジェクト

```javascript
// 引数として与えた数以上の最小の整数を返す
Math.ceil(45.95); //=> 46

// 引数として与えた数以下の最大の整数を返す
Math.floor(45.95); //=> 45

// 引数として与えた数を四捨五入して、最も近似の整数を返す
Math.round(20.49); //=> 20
Math.round(20.5); //=> 21
```

## 06. JSON の整形

```javascript
JSON.stringify(object); //=> 改行なしの文字列に
JSON.stringify(object, null, 2); //=> 改行とインデントがある見やすい文字列に
```

## 07. オブジェクトもしくは連想配列

```javascript
// 空のオブジェクトを生成する
let obj = {};

// プロパティのあるオブジェクトを生成する
let obj = {
  a: 1,
  b: 'abc',
  c: true,
  d: {},
  e: [],
  f: function () {},
};

// プロパティの名前とその値を表す変数とが
// 同名である場合には値の指定を省略できる
let title = 'Programming 101';
let price = 3700;
let book = { title, price };
// {title: title, price: price}と同じ

// オブジェクトのプロパティにメソッドを定義するとき、
// 関数型のプロパティとして表記する必要はない
let obj = {
  f: function (params) {}, //=> OK
  g(params) {}, //=> OK
};

// プロパティ名を動的に生成したいとき、
// プロパティ名をブラケットでくくることで、
// 式の値から動的にプロパティ名を生成できる
let data = {
  ['hoge' + ++i]: 15,
  ['hoge' + ++i]: 20,
};
```

## 08. Object.assign()メソッド

```javascript
// ひとつ以上のソースオブジェクトから、
// 直接所有で列挙可能なすべてのプロパティの値を、
// ターゲットオブジェクトへコピーする
// 戻り値はターゲットオブジェクト
let srcObj1 = { a: 1 };
let srcObj2 = { b: 2 };
let srcObj3 = { c: 3 };
let tgtObj = {};
var newObj = Object.assign(tgtObj, srcObj1, srcObj2, srcObj3);
//=> { a:1, b:2, c:3 }

// ターゲットオブジェクトは上書きされる。ソースオブジェクトに変化はなし
let tgtObj = { a: 1, c: 1 };
let srcObj = { a: 2, b: 2 };
let newObj = Object.assign(tgtObj, srcObj);
//=> {a:2, c:1, b: 2}
```

## 09. テンプレート文字列

```javascript
// テンプレート文字列はシングルクォート、ダブルクォートの代わりに、アクサングラーブで文字列を括る
// その中では、`${expression}`の形で、変数（式）を文字列の中に埋め込むことができる
// これまでは、変数とリテラルを＋演算子で連結していくしかなかったので、ぐんとシンプルになった

let a = `1 + 2 = ${1 + 2}`;
console.log(a); //=> 1 + 2 = 3
```

## 10. var 宣言、let 宣言、const 宣言

```javascript
// 再代入オーケー、再宣言オーケー
var spam = 12;
var spam = 13;

// 再代入オーケー、再宣言NG、変数がブロックスコープでのみ有効になる
let ham = 15;
ham = 17;
let ham = 12; //=> Error

// 再代入NG、再宣言NG
const ham = 15;
ham = 17; //=> Error
```

## 11. アロー関数式

function 式に比べてより短い構文を持ち、this の値を束縛する。常に匿名関数である

```javascript
// 基本形
(param1, param2) => {
  statements;
};

// 戻り括弧とリターンは省略できる。下は { return expression } と等価
(param1, param2) => expression;

// 引数が1個しかない場合、丸括弧は任意
(param1) => {
  statemantes;
};

// 引数がない場合、丸括弧は必須
() => {
  statements;
};

// オブジェクトのみを返す場合は、戻り括弧として丸括弧を使う
param1 = { foo: 'bar' };

// デフォルト引数を設定する
(param1 = default1, param2) => {
  statements;
};
```

JSX 記法は React オブジェクトを書いているにすぎない。故に React オブジェクトだけを返す場合は、丸括弧で囲む必要がある

### アロー関数の中で this は使えない

```javascript
// これは問題なく動作する
const profile = {
  name: 'Alex',
  getName: function () {
    return this.name;
  },
};

// これはエラーが発生する
// TypeError: Cannot read property of 'name' of undefined
const profile = {
  name: 'Alex',
  getName: () => {
    return this.name;
  },
};
```

いつでもどこでも全部アロー関数に置き換えればいいというわけではない。これからも通常のファンクションを使うシーンがある
